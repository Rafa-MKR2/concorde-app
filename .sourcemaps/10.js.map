{"version":3,"sources":["../../src/pages/about/about.module.ts","../../src/pages/about/about.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["/**\n * Created by hsuanlee on 2017/4/4.\n */\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AboutPage } from './about';\n\n@NgModule({\n    declarations: [\n        AboutPage,\n    ],\n    imports: [\n        IonicPageModule.forChild(AboutPage),\n    ],\n    exports: [\n        AboutPage\n    ]\n})\nexport class AboutPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/about.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, LoadingController, ToastController, Avatar } from 'ionic-angular';\nimport { ChatService } from '../../providers/chat-service';\n\nimport { ActionSheetController } from 'ionic-angular';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AngularFireDatabase } from '@angular/fire/database/database';\n\n\nimport { Camera, CameraOptions } from '@ionic-native/camera';\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-about',\n  templateUrl: 'about.html'\n})\nexport class AboutPage {\n\n\n  public user = this.auth.auth;\n  public avatar:string;\n  public typeFormateImage = this.user.currentUser.photoURL;\n\n  nome:string = this.user.currentUser.displayName;\n  email: string = this.user.currentUser.email;\n  tel: string = this.user.currentUser.phoneNumber;\n  dataLastLogin: Date = new Date();\n\n  constructor(public service : ChatService,\n              public auth : AngularFireAuth,\n              public db :AngularFireDatabase,\n              private camera: Camera, \n              private loadingCtrl: LoadingController,\n              private tost: ToastController,\n              public actionSheetCtrl: ActionSheetController,\n              public navCtrl: NavController){\n                \n  }\n \n\n  \n  presentActionSheet(){\n   return  this.actionSheetCtrl.create({\n      title: 'Selecione sua foto',\n      buttons: [\n        {\n          text: 'Tirar Foto',\n          icon:'camera',\n          handler: () => this.takePhoto()\n        \n        },{\n          text: 'Carregar Foto',\n          icon:'folder-open',\n          handler: () =>  this.getImage()          \n          \n        },{\n          text: 'Remover Foto',\n          icon:'close',\n          handler: () => this.changePhoto('https://firebasestorage.googleapis.com/v0/b/portifolio-rafa.appspot.com/o/perfil-Photos%2Fuser.jpeg?alt=media&token=6b12ca28-0c26-4427-b61e-6c372cd73f36')\n\n        }\n      ]\n    }).present();\n  }\n\n\n  \n\n \nchangePhoto(foto:string){\n  \n  this.db.object('usuarios/' + this.user.currentUser.uid).update({ photo: foto})\n\n  return this.auth.auth.currentUser.updateProfile({\n    displayName: this.auth.auth.currentUser.displayName,\n    photoURL:foto\n    })\n}\n\n  takePhoto(){\n    const options: CameraOptions = {\n      quality: 70,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      allowEdit:true\n    }\n\n    this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64:\n      this.avatar =  imageData;\n      this.typeFormateImage = 'data:image/jpeg;base64,'+this.avatar;\n\n    }, (err) => {\n      // Handle error\n    });\n  }\n\n  getImage() {\n    const options: CameraOptions = {\n      quality: 70,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      saveToPhotoAlbum:false\n    }\n\n    this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64:\n      this.avatar =  imageData;\n      this.typeFormateImage = 'data:image/jpeg;base64,'+this.avatar;\n\n    }, (err) => {\n      // Handle error\n    });\n  }\n\n  cropImage() { \n    const options: CameraOptions = {\n      quality: 70,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      saveToPhotoAlbum: false,\n      allowEdit:true,\n      targetWidth:300,\n      targetHeight:300\n    }\n\n    this.camera.getPicture(options).then((imageData) => {\n      this.avatar =  imageData;\n      this.typeFormateImage = 'data:image/jpeg;base64,'+this.avatar;\n    },() => {\n      this.tost.create({message:'Não foi possível capturar imagem',duration:2300,position:'middle'})\n\n    });\n  }\n\n  uploadImage(){\n\n    if(!this.avatar) return;\n\n    let byteCharacters =  atob(this.avatar)\n    \n    let  sliceSize =  512;\n    let byteArrays = [];\n  \n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      let slice = byteCharacters.slice(offset, offset + sliceSize);\n  \n      let byteNumbers = new Array(slice.length);\n      for (let i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n  \n      let byteArray = new Uint8Array(byteNumbers);\n  \n      byteArrays.push(byteArray);\n    }\n  \n    let blob = new Blob(byteArrays, {type: 'image/jpeg'});\n    let update = this.service.databaseFire().ref('perfil-Photos/'+this.user.currentUser.uid);\n\n    update.put(blob).then(()=> { \n      this.tost.create({message:'Foto atualizada com sucesso!', duration:2300,position:'middle'}).present()\n      update.getDownloadURL().then(image=>  this.changePhoto(image))\n\n    })\n   .catch(()=> this.tost.create({message:'Falha ao tenta atualizar foto!',duration:2300,position:'middle'}).present())\n   }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/about.ts"],"sourceRoot":""}